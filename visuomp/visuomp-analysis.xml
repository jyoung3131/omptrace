<?xml version="1.0" encoding="UTF-8"?>
<tmfxml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="xmldefinition.xsd">

	<!-- The state provider assigns states from events -->
	<stateProvider id="edu.oakland.visuomp.stateProvider" version="0">
		<head>
			<traceType id="org.eclipse.linuxtools.lttng2.ust.tracetype" />
			<label value="VISUOMP OpenMP Trace Analysis" />
		</head>

		<!-- Convenience names for the state values -->
		<definedValue name="STATE_THREAD_STARTED" value="1" />
		<definedValue name="STATE_IN_PARALLEL" value="2" />
		<definedValue name="STATE_IN_IMPLICIT_TASK" value="3" />
		<definedValue name="STATE_THREAD_IDLE" value="4" />
		<definedValue name="STATE_TRANSITION" value="99" /> <!-- changing state -->
		<definedValue name="STATE_THREAD_TERMINATED" value="100" />

		<!-- Event handlers -->
		<eventHandler eventName="lttng_visuomp:parallel_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_PARALLEL" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:parallel_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:implicit_task_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_IMPLICIT_TASK" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:implicit_task_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_THREAD_STARTED" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_THREAD_TERMINATED" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_idle_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_THREAD_IDLE" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_idle_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>

	</stateProvider>

	<!-- This is the definition of the time-graph view -->
	<timeGraphView id="org.eclipse.linuxtools.tmf.analysis.xml.sstimeview">
		<head>
			<analysis id="edu.oakland.visuomp.stateProvider" />
			<label value="VISUOMP OpenMP Trace View" />
		</head>
	
		<!-- Colors assigned to the state values -->
		<definedValue name="STATE_THREAD_STARTED" value="1" color="#FFDD00" /> <!-- yellow -->
		<definedValue name="STATE_IN_PARALLEL" value="2" color="#00FF00" /> <!-- lime -->
		<definedValue name="STATE_IN_IMPLICIT_TASK" value="3" color="#00CC11" /> <!-- green -->
		<definedValue name="STATE_THREAD_IDLE" value="4" color="#FF0000" /> <!-- red -->
		<definedValue name="STATE_TRANSITION" value="99" color="#FFFFFF" /> <!-- white -->
		<definedValue name="STATE_THREAD_TERMINATED" value="100" color="#FFFFFF" /> <!-- white -->

		<!-- Which attributes to "print" in the view -->
		<entry path="Threads/*">
			<display type="self" />
		</entry>
	</timeGraphView>

</tmfxml>
